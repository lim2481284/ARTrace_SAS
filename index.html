<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="UTF-8">
    <title>AR Trace</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="manifest.json">

    <!-- Main script & style -->
    <script src="face-recog/js/libs/model_pca_20_svm.js"></script>
    <script src="face-recog/js/emotionDetector.js"></script>
    <script src="face-recog/js/emotionModel.js"></script>
    <script src="face-recog/js/clmtrackr.js"></script>
    <script src="face-recog/js/lzstring.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="face-recog/js/faceDetection.js"></script>
    <script src="face-recog/js/faceRecognition.js"></script>
    <script src="face-recog/js/libs/d3.min.js"></script>
    <script src="face-recog/js/libs/utils.js"></script>

    <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- custom script and style-->
    <link rel="stylesheet" href="assets/css/main.css">
    <script src="assets/js/main.js"></script>

</head>

<body id=body>
    <div class='start-bg'>
        <img src='assets/image/landing.png'/>
    </div>
    <!-- <img class='test' src='assets/image/test.jpeg'/>-->
    <image src='assets/image/gradient.png' class='gradient'/>

    <div style="position: fixed;top:0; left:0; width:100vw;height:100vh;">
      <video id="video" width="400" height="300" autoplay loop style="position: absolute;object-fit: fill;z-index:0"></video>
      <canvas id="drawCanvas" width="400" height="300" style="position: absolute;z-index:1"></canvas>
    </div>

    <button style="z-Index:3" class='up'> Up </button>
    <button style="z-Index:3" class='down'> Down </button>
    <button style="z-Index:3" onclick="toggleFullScreen()"> Fullscreen </button>
    <button style="z-Index:3" class='capture'> Capture </button>

    <div class='displayBox' style="z-Index:2">
        <!--<video id="video" ></video>-->
        <div id='infoDisplay'>
            <ul>
                <li class='begin'>CUSTOMER DETAILS</li>
                <li>
                    <div class='col-sm-12 no-padding'>
                        <div class='col-sm-3 no-padding'>Name</div>
                        <div class='col-sm-9 info_name'></div>
                    </div>
                    <div class='col-sm-12 no-padding'>
                        <div class='col-sm-3 no-padding'>Age</div>
                        <div class='col-sm-9 info_age'></div>
                    </div>
                    <div class='col-sm-12 no-padding'>
                        <div class='col-sm-3 no-padding'>Recommendation</div>
                        <div class='col-sm-9 info_recommendation'></div>
                    </div>
                </li>
            </ul>
        </div>

    </div>

    <section>
        <div class="nav ">
            <image class='line' src='assets/image/line.png'/>
            <ul class="radial-nav expanded">
                <li data-content="js"><a href="#"><image src='assets/image/record.png' class='icon icon-3 ' c='3'/></a></li>
                <li data-content="css"><a href="#"><image src='assets/image/progress.png' class='icon icon-4' c='4'/></a></li>
                <li data-content="html5"><a class='reverse' href="#"><image src='assets/image/user.png' class='icon icon-5 reverse' c='5'/></a></li>
                <li data-content="jade"><a href="#"><image src='assets/image/credit.png' class='icon icon-6' c='6'/></a></li>
                <li data-content="git"><a href="#"><image src='assets/image/record.png' class='icon icon-7' c='7'/></a></li>
                <li data-content="grunt"><a href="#"><image src='assets/image/progress.png' class='icon icon-8' c='8'/></a></li>
                <li data-content="yo"><image src='assets/image/user.png' class='icon active-icon icon-1' c='1'/></li>
                <li data-content="gulp"><a href="#"><image src='assets/image/credit.png' class='icon icon-2' c='2'/></a></li>
            </ul>
        </div>
    </section>
  </body>

  <script>
    var w = screen.width || window.innerWidth
  	|| document.documentElement.clientWidth
  	|| document.body.clientWidth;

  	var h = screen.height || window.innerHeight
  	|| document.documentElement.clientHeight
  	|| document.body.clientHeight;

  	$(document).ready(function(){
  		navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia;

  	    if (navigator.getUserMedia) {
  	      navigator.getUserMedia({video: true}, handleVideo, videoError);
  	    }

  		function handleVideo(stream) {
  			video.srcObject = stream;
  		}

  		function videoError(e) {
  			console.log("Error handling video");
  			console.log(e)
  		}

  		$(".capture").click(function(){
  			var canvas=document.createElement('canvas');
  			canvas.width = video.width;
  			canvas.height = video.height;
  			canvas.getContext("2d").drawImage(video, 0, 0,canvas.width, canvas.height);
  			var img = canvas.toDataURL("image/jpeg",1.0);
  			//$(displayImage).attr("src",img)
  			//console.log(img)
  			faceReco(img);
  			//viewGallery();
  		})
  	})

    function toggleFullScreen() {
      var doc = window.document;
      var docEl = doc.documentElement;

      var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;
      var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;

      if(!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
        requestFullScreen.call(docEl);
      }
      else {
        cancelFullScreen.call(doc);
      }
    }
  </script>
</html>
